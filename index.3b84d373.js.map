{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-39452ae9299cc1fd.js","src/js/index.js","src/js/render_weeklytrends.js","node_modules/@parcel/runtime-js/lib/runtime-9d8fc285121c8bde.js","src/js/upcoming-this-mounth.js","src/js/local-storage.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"9p9yL\\\":\\\"index.3b84d373.js\\\",\\\"5SXwj\\\":\\\"sprite-stars.020edb1a.svg\\\",\\\"k7SKl\\\":\\\"my-library.5352efdf.js\\\",\\\"45zUA\\\":\\\"index.c8eaf707.js\\\"}\"));","// Тут додаємо імпорт готового модулю за зразком:\nimport * as mobilMenu from './mobile-menu';\nimport * as switcher from './switcher';\n// import * as moduleName from './js/module-name';\nimport * as WeeklyTrends from './render_weeklytrends';\nimport * as upcomingMounth from '../js/upcoming-this-mounth';\n\n","'use strict';\n\nimport sprite from '../../src/images/sprite-stars.svg';\nimport { getNameOfGenresById } from './get-genres';\nimport * as Api from './api';\n// import * as moduleName from './js/module-name';\n\nconst filmList = document.querySelector('.weekly');\n\n// функція яка перевіряє ширину екрану, якщо менше 768px то завантажує тільки один фільм\nfunction renderWeeklyFilms() {\n  if (window.innerWidth < 768) {\n    Api.getWeekTrending(1).then(data => {\n      const films = [data.results[0]];\n      creatMarkupCatalogCard(films)\n        .then(data => (filmList.innerHTML = data))\n        .catch(error => console.log(error));\n    });\n  } else {\n    Api.getWeekTrending(1).then(data => {\n      const films = data.results.slice(0, 3);\n      creatMarkupCatalogCard(films)\n        .then(data => (filmList.innerHTML = data))\n        .catch(error => console.log(error));\n    });\n  }\n}\n\nwindow.addEventListener('resize', renderWeeklyFilms);\nrenderWeeklyFilms();\n\nasync function creatMarkupCatalogCard(data) {\n  const markUp = data.reduce((markup, film) => markup + makeCard(film), '');\n  return markUp;\n}\n\nfunction makeCard({\n  id,\n  poster_path,\n  title,\n  name,\n  genre_ids,\n  release_date,\n  first_air_date,\n  vote_average,\n}) {\n  const arrOfGenres = getNameOfGenresById(genre_ids);\n  let stringOfGenres = arrOfGenres.slice(0, 2).join(', ');\n  const date = release_date || first_air_date;\n  const mediaQuery = window.matchMedia(\n    '(min-width: 768px) and (max-width: 1199px)'\n  );\n\n  // На таблетці відображає один жанр\n  if (mediaQuery.matches) {\n    stringOfGenres = arrOfGenres.slice(0, 1).join(', ');\n  }\n\n  // Якшо строка жанрів більша, рендерити один жанр\n  if (stringOfGenres.length > 18)\n    stringOfGenres = arrOfGenres.slice(0, 1).join(', ');\n\n  // const currentGenres = () => {\n  //   if (window.innerWidth < 1280) {\n  //     return stringOfGenres[0];\n  //   }\n  //   return stringOfGenres.join(', ');\n  // };\n\n  // window.addEventListener('resize', () => {\n  //   currentGenres();\n  // });\n\n  return `<li class=\"catalog__card\" data-id=\"${id}\">\n  <div class=\"catalog__img-wrapper\">\n    <img src=\"https://image.tmdb.org/t/p/w500${\n      poster_path || 'Oops. There is no poster to this movie'\n    }\" alt=\"${name || title}\" width=\"395\" height=\"574\" class=\"catalog__img\" />\n  </div>\n  <div class=\"catalog__info info\">\n    <p class=\"info__title\">${name || title}</p>\n<div class=\"info__wrap\">\n<ul class=\"info__list\">\n    <li class=\"info__descr\">${stringOfGenres}</li>\n    <li class=\"info__descr\">${convertReleaseDate(date)}</li>\n    </ul>\n<div class=\"catalog__stars-wrap\">\n<div class=\"catalog__rating-active\" style=\"width:${\n    vote_average / 2 / 0.05\n  }%\"></div>\n</div>\n</div>\n  </div>\n</li>`;\n}\n\nfunction convertReleaseDate(date) {\n  if (date) {\n    return date.slice(0, 4);\n  } else return '';\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + require('./helpers/bundle-manifest').resolve(\"5SXwj\");","import * as Api from './api';\nimport { setGenresInStorage } from './get-genres';\nimport { getNameOfGenresById } from './get-genres';\nimport { setAddedMovies } from './local-storage';\nimport { getAddedMovies } from './local-storage';\n\nconst container = document.querySelector('.upcoming-content');\n\nApi.getUpcoming()\n  .then(({ results }) => {\n    const NOW_Date = new Date();\n\n    const filmUpcomingRelease = results.filter(\n      film => NOW_Date < Date.parse(film.release_date)\n    );\n\n    if (filmUpcomingRelease.length === 0) {\n      renderMarkupError();\n\n      return;\n    }\n\n    const random = Math.floor(Math.random() * filmUpcomingRelease.length);\n    const render = createMarkup(filmUpcomingRelease[random]);\n\n    // const random = Math.floor(Math.random() * (results.length-1));\n    // const render = createMarkup(results[random]);\n\n    renderMarkup(render);\n\n    const buttonAdd = document.getElementById('add');\n    const buttonRemove = document.getElementById('remove');\n\n    let existing = getAddedMovies();\n    existing = existing ? existing : [];\n    if (existing.includes(filmUpcomingRelease[random].id)) {\n      buttonAdd.classList.add('hidden');\n      buttonRemove.classList.remove('hidden');\n    }\n\n    buttonAdd.addEventListener('click', onClickAdd);\n    buttonRemove.addEventListener('click', onClickRemove);\n\n    function onClickAdd() {\n      let existing = getAddedMovies();\n      existing = existing ? existing : [];\n      if (existing.includes(filmUpcomingRelease[random].id)) {\n        buttonAdd.classList.add('hidden');\n        buttonRemove.classList.remove('hidden');\n        return;\n      }\n      existing.push(filmUpcomingRelease[random].id);\n      setAddedMovies(existing);\n      buttonAdd.classList.add('hidden');\n      buttonRemove.classList.remove('hidden');\n    }\n\n    function onClickRemove() {\n      let existing = getAddedMovies();\n      existing = existing ? existing : [];\n      if (existing.includes(filmUpcomingRelease[random].id)) {\n        let index = existing.findIndex(\n          id => id === filmUpcomingRelease[random].id\n        );\n\n        existing.splice(index, 1);\n        setAddedMovies(existing);\n        buttonAdd.classList.remove('hidden');\n        buttonRemove.classList.add('hidden');\n      }\n    }\n  })\n  .catch(error => console.log(error));\n\nsetGenresInStorage();\n\nfunction createMarkup({\n  backdrop_path,\n  genre_ids,\n  title,\n  overview,\n  vote_average,\n  vote_count,\n  release_date,\n  popularity,\n}) {\n  const vote = vote_average.toFixed(1);\n  const populate = popularity.toFixed(1);\n  const genres = getNameOfGenresById(genre_ids).slice(0, 3).join(' ');\n\n  return `\n      <img\n        class=\"upcoming-content__img\"\n        src=\"https://image.tmdb.org/t/p/w500${backdrop_path}\"\n        alt=\"${title}\"\n       \n      \n      />\n\n      <div class=\"upcoming-content__desktop\">\n        <h3 class=\"upcoming-content__name\">${title}</h3>\n\n        <div class=\"upcoming-thumb\">\n          <ul class=\"upcoming-list left\">\n            <li class=\"upcoming-list__item\">\n              <p class=\"upcoming-list__text\">Release date</p>\n              <p class=\"upcoming-list__date\">${release_date}</p>\n            </li>\n            <li class=\"upcoming-list__item\">\n              <p class=\"upcoming-list__text\">Vote / Votes</p>\n              <p class=\"upcoming-list__vote\">\n                <span class=\"vote\"> ${vote}</span> / <span class=\"vote\">${vote_count}</span>\n              </p>\n            </li>\n          </ul>\n\n          <ul class=\"upcoming-list rigth\">\n            <li class=\"upcoming-list__item\">\n              <p class=\"upcoming-list__text\">Popularity</p>\n              <p class=\"upcoming-list__pop\">${populate}</p>\n            </li>\n            <li class=\"upcoming-list__item\">\n              <p class=\"upcoming-list__text\">Genre</p>\n              <p class=\"upcoming-list__genre\">${genres}</p>\n            </li>\n          </ul>\n        </div>\n\n        <h3 class=\"upcoming-content__title\">About</h3>\n        <p class=\"upcoming-content__text\">${overview}\n        </p>\n\n  <button type=\"button\" class=\"upcoming-content__btn\" id=\"add\">\n  Remind me\n</button>   \n <button type=\"button\" class=\"upcoming-content__btn-remove hidden\" id=\"remove\">\n  Remove from my library\n</button>    \n`;\n}\n\nfunction renderMarkup(markup) {\n  container.innerHTML = markup;\n}\n\nfunction renderMarkupError() {\n  container.innerHTML = `<div class=\"upcoming-error-container\">\n        <p class=\"upcoming-error-container__text\">\n          OOPS...<br />\n          We are very sorry!<br />\n          But we couldn't find any upcoming movies this month.\n        </p>\n      </div>`;\n}\n","const KEY_ADDED_MOVIES = 'addedMovies';\n\n// Нічого не отримує, віддає значення ключа KEY_ADDED_MOVIES *массив\nexport function getAddedMovies() {\n  return JSON.parse(localStorage.getItem(KEY_ADDED_MOVIES));\n}\n\n// Отримує масив та записує його в якості значення ключа KEY_ADDED_MOVIES\nexport function setAddedMovies(arr) {\n  localStorage.setItem(KEY_ADDED_MOVIES, JSON.stringify(arr));\n}\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$bpxeT","getBundleURL","resolve","$bdd6ef7977612ae8$var$filmList","document","querySelector","$bdd6ef7977612ae8$var$renderWeeklyFilms","window","innerWidth","$b7ONl","getWeekTrending","then","data1","$bdd6ef7977612ae8$var$creatMarkupCatalogCard","results","data","innerHTML","catch","error","console","log","data2","slice","$bdd6ef7977612ae8$var$_creatMarkupCatalogCard","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","markUp","reduce","markup","film","$bdd6ef7977612ae8$var$makeCard","param","poster_path","title","name","genre_ids","release_date","first_air_date","vote_average","arrOfGenres","$lwvvG","getNameOfGenresById","stringOfGenres","join","date","matchMedia","concat","$bdd6ef7977612ae8$var$convertReleaseDate","addEventListener","$3791646d3ae2cee8$var$KEY_ADDED_MOVIES","$3791646d3ae2cee8$export$ecd891e0a1bfc801","localStorage","getItem","$3791646d3ae2cee8$export$27a9a736d6c51b21","arr","setItem","stringify","$e84ace7ea33f9bcd$var$container","getUpcoming","NOW_Date","Date","filmUpcomingRelease","filter","random","Math","floor","render","backdrop_path","overview","vote_count","popularity","vote","toFixed","populate","genres","$e84ace7ea33f9bcd$var$createMarkup","buttonAdd","getElementById","buttonRemove","existing1","includes","classList","add","remove","existing","push","index","findIndex","splice","setGenresInStorage"],"version":3,"file":"index.3b84d373.js.map"}